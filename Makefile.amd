CFLAGS += -std=c99 -g -Ofast -fopenmp -I$(HIP_PATH)/include -D__HIP_PLATFORM_HCC__
CFLAGS += -DO_HIP
CFLAGS += -DO_BIG
#CFLAGS += -DO_MEDIUM

CXX := hipcc
CXXFLAGS += -g -Ofast -Wno-unused-command-line-argument --amdgpu-target=gfx906

LD := $(CXX)
LDFLAGS := $(CXXFLAGS)
LIBS := -lopenblas -lgomp

CSRC := $(wildcard *.c) 
CXXSRC := $(wildcard *.cpp)
OBJ := $(CSRC:.c=.o) $(CXXSRC:.cpp=.o)

EXE := many-small-dgemms.amd.x

$(EXE): $(OBJ)
	$(LD) $(LDFLAGS) $(OBJ) -o $(EXE) $(LIBS)

clean:
	rm -f $(OBJ) $(EXE)
